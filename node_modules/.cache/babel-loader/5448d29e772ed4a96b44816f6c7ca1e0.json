{"ast":null,"code":"import _objectSpread from \"/Users/garyc/Downloads/phase-challenge/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _taggedTemplateLiteral from \"/Users/garyc/Downloads/phase-challenge/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _templateObject,\n  _templateObject2,\n  _this = this,\n  _jsxFileName = \"/Users/garyc/Downloads/phase-challenge/src/Canvas.js\";\nimport React, { useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { addElement, updateElement } from \"./reducers/element\";\nimport { selectElements } from \"./reducers/element\";\nvar CanvasWrapper = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  position: relative;\\n  background: white;\\n  overflow: hidden;\\n\"])));\nvar Block = styled.div(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  position: absolute;\\n  width: 50px;\\n  height: 50px;\\n  left: \", \"px;\\n  top: \", \"px;\\n  opacity: \", \";\\n  background: \", \";\\n  outline: \", \"px solid #0274ff;\\n\"])), function (props) {\n  return props.x;\n}, function (props) {\n  return props.y;\n}, function (props) {\n  return props.o / 100;\n}, function (props) {\n  return props.color;\n}, function (props) {\n  return props.active ? 1 : 0;\n});\nvar Canvas = function Canvas(props) {\n  var dispath = useDispatch();\n  var pageActive = props.pageActive,\n    elementActive = props.elementActive,\n    setElementAcitve = props.setElementAcitve;\n  var elements = useSelector(selectElements);\n  var elementInPage = elements.filter(function (item) {\n    return item.page === pageActive;\n  });\n\n  //cancel dragover animation\n  function handleDragOver(e) {\n    e.preventDefault();\n  }\n\n  //drag and drop\n  var handleDrag = function handleDrag(e) {\n    e.preventDefault();\n\n    //avoid return x to 0\n    if (e.screenX === 0) {\n      return;\n    }\n    var itemIndex = elements.findIndex(function (item) {\n      return item.id === elementActive;\n    });\n    dispath(updateElement(_objectSpread(_objectSpread({}, elements[itemIndex]), {}, {\n      positionX: e.clientX - 230,\n      positionY: e.clientY - 20\n    })));\n  };\n  return /*#__PURE__*/React.createElement(CanvasWrapper, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }\n  }, elementInPage.map(function (item) {\n    return /*#__PURE__*/React.createElement(Block, {\n      draggable: true,\n      onClick: function onClick() {\n        return setElementAcitve(item.id);\n      },\n      onDragOver: handleDragOver,\n      onDrop: true,\n      onDrag: function onDrag(e) {\n        return handleDrag(e);\n      },\n      key: item.id,\n      x: item.positionX,\n      y: item.positionY,\n      o: item.opacity,\n      active: item.id === elementActive,\n      color: item.color,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 11\n      }\n    });\n  }));\n};\nexport default Canvas;","map":{"version":3,"names":["React","useEffect","styled","useSelector","useDispatch","addElement","updateElement","selectElements","CanvasWrapper","div","_templateObject","_taggedTemplateLiteral","Block","_templateObject2","props","x","y","o","color","active","Canvas","dispath","pageActive","elementActive","setElementAcitve","elements","elementInPage","filter","item","page","handleDragOver","e","preventDefault","handleDrag","screenX","itemIndex","findIndex","id","_objectSpread","positionX","clientX","positionY","clientY","createElement","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","map","draggable","onClick","onDragOver","onDrop","onDrag","key","opacity"],"sources":["/Users/garyc/Downloads/phase-challenge/src/Canvas.js"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { addElement, updateElement } from \"./reducers/element\";\nimport { selectElements } from \"./reducers/element\";\nconst CanvasWrapper = styled.div`\n  position: relative;\n  background: white;\n  overflow: hidden;\n`;\n\nconst Block = styled.div`\n  position: absolute;\n  width: 50px;\n  height: 50px;\n  left: ${(props) => props.x}px;\n  top: ${(props) => props.y}px;\n  opacity: ${(props) => props.o / 100};\n  background: ${(props) => props.color};\n  outline: ${(props) => (props.active ? 1 : 0)}px solid #0274ff;\n`;\n\nconst Canvas = (props) => {\n\n  const dispath = useDispatch();\n  const { pageActive, elementActive, setElementAcitve } = props;\n  const elements = useSelector(selectElements)\n  const elementInPage = elements.filter(item => item.page === pageActive);\n\n  //cancel dragover animation\n  function handleDragOver(e) {\n    e.preventDefault()\n  }\n\n  //drag and drop\n  const handleDrag = (e) => {\n    e.preventDefault();\n\n    //avoid return x to 0\n    if (e.screenX === 0) {\n      return;\n    }\n    const itemIndex = elements.findIndex(item => item.id === elementActive)\n    dispath(updateElement({ ...elements[itemIndex], positionX: (e.clientX - 230), positionY: (e.clientY - 20) }))\n  }\n\n  return (\n    <CanvasWrapper  >\n      {elementInPage.map((item) => {\n        return (\n          <Block draggable onClick={() => setElementAcitve(item.id)} onDragOver={handleDragOver} onDrop onDrag={(e) => handleDrag(e)} key={item.id} x={item.positionX} y={item.positionY} o={item.opacity} active={item.id === elementActive} color={item.color} />\n        )\n      })}\n\n    </CanvasWrapper>\n  );\n};\n\nexport default Canvas;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}